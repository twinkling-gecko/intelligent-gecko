---
marp: true
theme: moja-gecko
---

<!-- _class: cover -->

# 日常生活におけるアナログデータ可視化による QoL の向上

## 卒業制作 中間発表<br>Team twinkling-gecko<br>2020-12-07

---

# メンバー

- リーダー 上村健太
- メンバー 鈴木颯太
- メンバー 篠原彰
- メンバー 小林稜太

<br>

- 属人化を避ける為、担当分野の固定はしていない

<!--
スクラム開発における"属人性の排除"の解釈については諸説ある
ここでは、うちの学校の卒制でありがちな"完全な役割分担"を避ける という意味合い
http://bonotake.hatenablog.com/entry/2018/01/12/085058
-->

---

# プレゼンの流れ

## 1. テーマ概要

## 2. デモンストレーション

## 3. 開発環境について

## 4. CI/CD について

## 5. 進捗とスケジュールについて

---

# テーマ概要 (1)

## 日常生活におけるメタデータを集積・可視化するプラットフォーム

![gaiyo1](https://user-images.githubusercontent.com/38117745/100575189-eb9e7d00-331e-11eb-8757-a23831aa3131.png)

<!-- 日常生活におけるメタデータを集積・可視化するプラットフォーム -->

<!-- TODO 図をいい感じに直す -->

---

# テーマ概要 (2)

![gaiyo2](https://user-images.githubusercontent.com/38117745/100575928-6f0c9e00-3320-11eb-805f-56168bfdfde9.png)

<!--
技術的な図
私達は各家庭にセンサーを設置し、そこから得られるメタデータを集約、消費者へは通知や依存性チェックを、企業へは需要予測の最適化といった利活用をするプラットフォームの構築を目指しています。
-->

<!-- TODO 図をいい感じに直す -->

---

# デモンストレーション

## 動画によるデモンストレーションをお見せします。

<!--
この動画の中で、
- はかりで重量を測ってるシーン
- BLEのブロードキャストの傍受
- プラットフォームへ登録されてるところ
を撮影してそれっぽくつなぎ合わせるといいかも
-->

---

# 開発環境について

## 課題

- 開発に使うマシンや環境の差
- コード品質の維持
- Vim で開発したい

## 解決策

- 開発環境を Docker にまとめた
- CocAction や pre-commit による lint の活用
- PlatformIO を利用

---

# 開発環境について(プラットフォーム 1/2)

## 環境の差

- 貸与品 dynabook & Windows + WSL2 + Ubuntu
- 貸与品 dynabook & Ubuntu
- ThinkPad & Ubuntu
- MacBook Air & MacOS

<!--
チーム内で環境が割とバラバラ。今回はDocker+docker-composeで環境を構築し、環境に起因するトラブルを避けた。
-->

---

# 開発環境について(プラットフォーム 2/2)

## コード品質の維持

- coc.nvim の CocAction
- pre-commit

<!--
複数人で開発する際に問題となるのがコード品質の維持。コードスタイル等の差異は1アクションでLanguage Serverのフォーマット機能を呼び出せるCocActionやpre-commitによる検査により補正する
-->

---

# 開発環境について (マイコン)

## Vim で開発したい

- コマンドラインでコンパイル&アップロード
- Language Server の支援を受けたい
  - include path の問題が発生

<br>

![hokan](https://user-images.githubusercontent.com/38117745/100571642-f7864100-3316-11eb-83ef-dfd4a2e99983.png)

<!--
マイコンの開発をするに当たり、Arduinoプラットフォームを利用する前提で、3つの環境を試した。

1. Arduino IDE
2. Arduino CLI
3. PlatformIO

最終的に私達のチームではPlatformIOをDockerに閉じ込めた環境を構築し、使用することとした。

Arduino IDEは手軽だが、IDEとしての使い勝手が悪いので、物品の検品を兼ねた最初期のテストにのみ使用。

任意のエディタを使うことを前提に、CLIツールによるコンパイル&アップロードとライブラリの管理のソリューションを模索した。
Arduino CLIはArduino公式でサポートされているコマンドラインツールで、当初はこれをベースにDockerに閉じ込めて、ライブラリの格納先をホストと共有することで環境を作ろうとした。
しかし、C++のLanguage Serverがこのライブラリをincludeできなかった為、断念。

PlatformIOをベースにすることとし、ライブラリ郡はPlatformIOの持つライブラリ管理システムに乗っかり、出力されるLanguage Server用のinclude pathを記述したファイルのパスを置換することで対応。

ホストの環境を汚さず、VimでC++のLanguage Serverであるcclsの支援を受けながらコーディングし、ターミナルからビルドとアップロードする環境を用意した。
-->

---

# CI/CD について

---

# 進捗とスケジュールについて

## 物品の調達遅れ

- 学校側の物品管理の問題により、物品の受け取りが 10 月の下旬までずれ込んだ
  - そこから実機を用いての検証を開始し、実現可能である事を確認した段階

## 今後の予定

- スケジュール遅延により、当初予定していた部分の多くは諦めざるを得ない
  - 最低限必要な機能をピックアップして実装を進める

---

<!-- _class: back-cover -->

# ご清聴ありがとうございました

<!--
質疑応答用メモ
- Amazonの自動発注秤
- ATOM Sensor
 -->
