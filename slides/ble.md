---
marp: true
theme: moja-gecko
---

<!--- _class: cover -->

# BLE

##

---

# Bluetooth

- 数 m から数十 m 程度の距離の情報機器間で、電波を使い簡易な情報のやりとりを行うのに使用される
- 2.4GHz 帯を使用して、比較的低速度のデジタル情報の無線通信を行う用途に採用されている。
- IEEE 802.15.1
- 最新バージョンは 5.x 系(2020.07.16 現在)

---

# Mode

<br/>

- BR/EDR
  - クラシック Bluetooth とか呼ばれてる
  - 79 チャンネル
- LE
  - <strong>Bluetooth 4.0</strong>から追加された
  - 40 チャンネル
  <!-- 2MHz幅で分割 -->

---

# Bluetooth Low Energy

- 従来の BR/EDR とは別の規格
  - 省エネルギー
  - 複雑でない
  - 低コスト
- BR/EDR との互換性
  - BR/EDR のみ実装されたもの<strong>Bluetooth</strong>
  - LE のみ実装されたもの<strong>Bluetooth Smart</strong>
  - LE と BR/EDR の両方が実装されたもの<strong>Bluetooth Smart Ready</strong>
  - LE 実装当初はこれらの呼称を使っていたが、現在は禁止されている

---

# LE Method

- ブロードキャスト方式
  - ある BLE デバイスから別の BLE デバイスに対して、<strong>一方的に</strong>データを送信するための通信方法
  - データを発信するデバイスをブロードキャスター、データを受信するデバイスをオブザーバー
  - ブロードキャスターは deep sleep という休止状態をして、<br/>省電力に務めることができる
  - ブロードキャスターが発信しているデータのことを<br/>アドバタイズパケットと呼ぶ

---

# LE Method

- コネクション方式
  - ある BLE デバイスと別の BLE デバイスとの間で、<strong>相互に</strong>データを送受信するための通信方法
  - 通信のホスト(コネクションを開始要求をする側)となるデバイスをセントラル(or マスター)
  - コネクションの開始要求を受け取る側となるデバイスを<br/>ペリフェラル(or スレーブ)

---

# Protocol

<br/>

- コントローラ層
  - 電波の送受信、パケット通信、接続管理
- ホスト層
  - Bluetooth のプロトコルやプロファイルごとの通信の多重化など、Bluetooth の複雑な通信機能
- アプリケーション層
  - 開発者が作る層

---

# GAP & GATT

ある BLE デバイスにおいて用いられる、データの送受信定義やユースケースなどを設定するプロファイル

## GAP

#### 外部デバイスとの接続を司るプロファイル

デバイス検索、コネクション、セキュリティの確立など、<br/>異なるメーカーのデバイス間での相互運用性を保証し、<br/>データのやり取りが行えるようにするための制御手順を規定するもの

---

# GAP & GATT

## GATT

#### 外部からのエントリポイントを司るプロファイル

データの送受信やデータの構造について定義したプロファイルで、<br/>全てのデータ定義の基本となっています。データ層の最上位定義で、<br/>すべての BLE デバイスは GATT で定義されている仕様に従って<br/>データのやり取りを行われなければなりません。<br/>言い換えると、BLE アプリケーションは、すべてこの GATT を使用して<br/>構築されることになります。
